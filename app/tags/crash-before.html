<pop-crash-before>
    <img id="crash-image" src="images/crash_before.png" onclick="{ opts.onCrashRequested }"/>
    <div id="building-initial"> {opts.buildingInitial}</div>
    <back-svg id="back-icon" onclick={goNameView}></back-svg>
    <question-svg id="question-icon" onclick={showHelp}></question-svg>

    <script>
        this.buildingInitial = null;
        this.questionIcon = null;
        this.backIcon = null;

        this.on('mount', () => {
            console.log("crash before mounted");

            this.buildingInitial = document.getElementById("building-initial");
            this.questionIcon = document.getElementById("question-icon");
            this.backIcon = document.getElementById("back-icon");



            this.calcComponentPosition()
        });

        this.on('update', () => {
            this.calcComponentPosition()
        });

        this.goNameView = () => route("/");

        this.showHelp = () => swal("画像をタップか、端末を振る");

        this.calcComponentPosition = () => {
            const {width, height} = this.opts;

            this.buildingInitial.style.top = height * 0.44;
            this.buildingInitial.style.left = width * 0.235;
            this.buildingInitial.style.width = width * 0.1;
            this.buildingInitial.style.fontSize = width * 0.05;

            this.backIcon.style.top = height * 0.05;
            this.backIcon.style.left = width * 0.05;
            this.backIcon.style.height = width * 0.08;
            this.backIcon.style.width = width * 0.08;

            this.questionIcon.style.top = height * 0.05;
            this.questionIcon.style.right = width * 0.05;
            this.questionIcon.style.height = width * 0.08;
            this.questionIcon.style.width = width * 0.08;
        }
    </script>

    <style>
        #crash-image {
            width: 100%;
            height: auto;
        }

        #building-initial {
            position: absolute;
            text-align: center;
            transform: rotate(15deg) scale(0.9, 1);;
        }

        #question-icon {
            position: absolute;
        }

        #back-icon {
            position: absolute;
        }
    </style>
</pop-crash-before>
